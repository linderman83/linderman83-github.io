(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{428:function(t,a,e){t.exports=e.p+"assets/img/tree_original.24e973d9.png"},429:function(t,a,e){},442:function(t,a,e){t.exports=e.p+"assets/img/original_1.6593fec9.jpg"},443:function(t,a,e){"use strict";e(429)},472:function(t,a,e){"use strict";e.r(a);e(443);var s=e(16),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"webp-image-format"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webp-image-format"}},[t._v("#")]),t._v(" webp image format")]),t._v(" "),s("h2",{attrs:{id:"webp-short-introduction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webp-short-introduction"}},[t._v("#")]),t._v(" webp - short introduction")]),t._v(" "),s("p",[t._v("Web is an image format, introduced by Google, more than 10 years ago. Web developers and designers have the main advantage over webp, because it achieves a much smaller image size, while preserve the quality.\nClaims from Google suggest, that webp can achieve "),s("em",[t._v("x3 (times) smaller file size")]),t._v(", compared to .png and 34% smaller file size, than .jpeg.")]),t._v(" "),s("p",[t._v("Currently webp is supported from the major browsers, including: Chrome (v32+), Firefox (v65+), Edge (v18+), Opera (11.10+), Chrome Android (v25+), Android Native Browser (4.2+).")]),t._v(" "),s("p",[t._v("Webp can also replace the well-known .git format. Not only can create animated images, but with more RGB colors (24 bit) and more alpha channels (8), compared to .gif (8bit colors and 1 alpha channel)")]),t._v(" "),s("h2",{attrs:{id:"installation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),s("p",[t._v("Pre-compiled binaries:\n"),s("a",{attrs:{href:"https://developers.google.com/speed/webp/download",target:"_blank",rel:"noopener noreferrer"}},[t._v("Download Page"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("Note, the above are compiled with GLIBC 2.29 and you may have problems, having older lib on your system. You can compile webp toolset yourself: see below ...")]),t._v(" "),s("h2",{attrs:{id:"compiling-from-source-linux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#compiling-from-source-linux"}},[t._v("#")]),t._v(" Compiling from Source (Linux)")]),t._v(" "),s("p",[t._v("Requiremets:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" build-essential libpng-dev libjpeg-dev freeglut3-dev\n")])])]),s("ul",[s("li",[t._v("freeglut3-dev is needed for vwebp (webp image viewer)")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://storage.googleapis.com/downloads.webmproject.org/releases/webp/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Download source"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" libwebp-x.x.x\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("./configure --enable-everything --enable-libwebpdemux\n")])])]),s("ul",[s("li",[t._v("--enable-libwebpdemux is needed for vwebp (webp image viewer)")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),s("p",[t._v("If all went ok, you must have:")]),t._v(" "),s("p",[s("strong",[t._v("cwebp")]),t._v(" - convert .jpg, .png,  .tiff to .webp")]),t._v(" "),s("p",[s("strong",[t._v("dwebp")]),t._v(" - convert .webp to .png")]),t._v(" "),s("p",[s("strong",[t._v("vwebp")]),t._v(" - .webp viewer")]),t._v(" "),s("p",[s("strong",[t._v("webpmux")]),t._v(" - create animated .webp images from other .webp files, or extract frames from other animated .webp")]),t._v(" "),s("p",[s("strong",[t._v("gif2webp")]),t._v(" - .gif to .webp")]),t._v(" "),s("p",[s("strong",[t._v("img2webp")]),t._v(" - create animated .webp from .png, .jpg, .jpeg, .tiff and other files")]),t._v(" "),s("p",[s("strong",[t._v("webpinfo")]),t._v(" - show .webp info, detect file errors etc")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("If you set --prefix, dont forget to run:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("LD_LIBRARY_PATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$LD_LIBRARY_PATH")]),t._v(":/path-to-your-build-lib-folder/lib\n")])])]),s("p",[t._v("Otherwise, you may receive error msg, similar to this:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("cwebp: error "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" loading shared libraries: libwebp.so.7: cannot "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),t._v(" shared object file: No such "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" or directory\n\n")])])])]),t._v(" "),s("h3",{attrs:{id:"now-lets-make-some-tests"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#now-lets-make-some-tests"}},[t._v("#")]),t._v(" Now, lets make some tests ...")]),t._v(" "),s("h2",{attrs:{id:"jpg-to-webp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jpg-to-webp"}},[t._v("#")]),t._v(" JPG to WEBP")]),t._v(" "),s("p",[t._v("This is the original .jpg image - 1024x768 pixels, 228K original.jpg")]),t._v(" "),s("p",[s("a",{attrs:{href:"/images/blog/original_1.jpg"}},[s("img",{attrs:{src:"/images/blog/original_1.jpg",alt:"jpg to webp original image"}})])]),t._v(" "),s("p",[t._v("Lets run that through basic cwebp optimization, with no additional arguments")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("cwebp original.png -o optimized.wepb\n")])])]),s("p",[t._v("-o to set output file")]),t._v(" "),s("p",[t._v("Optimized image: "),s("strong",[t._v("94K")]),t._v(" optimized.webp")]),t._v(" "),s("p",[s("a",{attrs:{href:"/images/blog/optimized_1.webp"}},[s("img",{attrs:{src:"/images/blog/optimized_1.webp",alt:"jpg to webp optimized image"}})])]),t._v(" "),s("p",[t._v("Wow, more than 2 times file-size optimization.")]),t._v(" "),s("p",[t._v("Lets see how much of a detail we lost ...")]),t._v(" "),s("div",{staticClass:"image-comparison"},[s("img",{staticClass:"custom",attrs:{src:e(442)}})]),t._v(" "),s("div",{staticClass:"image-comparison"},[s("img",{staticClass:"custom",attrs:{src:"/images/blog/optimized_1.webp"}})]),t._v(" "),s("p",[t._v("Not much lost, not much at all!!")]),t._v(" "),s("p",[t._v("Another example, but this time with really big and detailed image:")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("This next original image is really huge 9.2 MB, so i will not show it, but just link it.")]),t._v(" "),s("p",[t._v("You can compare both original and optimized, by clicking on the links.")])]),t._v(" "),s("p",[s("a",{attrs:{href:"/images/blog/original.jpg"}},[t._v("Original 9.2M")])]),t._v(" "),s("p",[s("a",{attrs:{href:"/images/blog/optimized.webp"}},[t._v("Optimized 2.0M")])]),t._v(" "),s("p",[t._v("Best optimization file-size/quality i was able to produce with:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("cwebp -m "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(" -qrange "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" -sns "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" original.jpg -o optimized.webp\n")])])]),s("h2",{attrs:{id:"png-to-webp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#png-to-webp"}},[t._v("#")]),t._v(" PNG to WEBP")]),t._v(" "),s("p",[t._v("Dry cwebp command run, without any parameters:")]),t._v(" "),s("p",[t._v("Original file: 680x480 pixels, 419K "),s("br")]),t._v(" "),s("p",[s("a",{attrs:{href:"/images/blog/tree_original.png"}},[s("img",{attrs:{src:"/images/blog/tree_original.png",alt:"png to webp original image"}})])]),t._v(" "),s("p",[t._v("Optimized file: 680x480 pixels, "),s("strong",[t._v("81K")]),t._v(" "),s("br")]),t._v(" "),s("p",[s("a",{attrs:{href:"/images/blog/tree_optimized.webp"}},[s("img",{attrs:{src:"/images/blog/tree_optimized.webp",alt:"png to webp optimized image"}})])]),t._v(" "),s("p",[t._v("Again very good result! "),s("br")]),t._v(" "),s("div",{staticClass:"image-comparison"},[s("img",{staticClass:"custom",attrs:{src:e(428)}})]),t._v(" "),s("div",{staticClass:"image-comparison"},[s("img",{staticClass:"custom",attrs:{src:"/images/blog/tree_optimized.webp"}})]),t._v(" "),s("br"),t._v(" "),s("p",[t._v("Best i did for PNG to WEBP is using:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("cwebp -m "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(" -qrange "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" -alpha_q "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" tree_original.png -o tree_optimized_2.webp\n")])])]),s("br"),t._v(" "),s("p",[t._v("Here is the result:\nOriginal: 419K\nOptimized: 34K")]),t._v(" "),s("div",{staticClass:"image-comparison"},[s("img",{staticClass:"custom",attrs:{src:e(428)}})]),t._v(" "),s("div",{staticClass:"image-comparison"},[s("img",{staticClass:"custom",attrs:{src:"/images/blog/tree_optimized.webp"}})]),t._v(" "),s("br"),t._v(" "),s("p",[t._v("Pretty usable!")]),t._v(" "),s("br"),t._v(" "),s("h2",{attrs:{id:"additional-notes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#additional-notes"}},[t._v("#")]),t._v(" Additional notes:")]),t._v(" "),s("p",[t._v("Adoption:")]),t._v(" "),s("p",[t._v("WebP is already supported in alot of brawsers and applications and packages. You can use it right away in the major browsers, others (more exotic) are still unable to display it, or with limitations (Safari). One way to overcome this is by using "),s("code",[t._v("<picture>")]),t._v(" tag in html pages. "),s("code",[t._v("<picture>")]),t._v(" allow to specify a fallback image:")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("picture")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("source")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("image/webp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("srcset")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("file.webp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fallbackimage.jpg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("alt")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- fallback image if .webp is not supported --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("picture")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n")])])]),s("p",[t._v("Another issue with .webp, are the user applications supporting it. Cannot speak for Windows , but on linux (Ubuntu) .webp is not\nsupported out of the box. Good news is, that there are quite a lot Internet sources, to add support for your installation. Examples:")]),t._v(" "),s("p",[s("strong",[t._v("gThump")]),t._v(" - often quoted for its out-of-the-box webp support.")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gthump\n")])])]),s("p",[t._v("For "),s("strong",[t._v("Image Viewer")]),t._v(": webp-pixbuf-loader")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" add-apt-repository ppa:krifa75/eog-ordissimo\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" update\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" webp-pixbuf-loader\n")])])]),s("p",[s("strong",[t._v("imlib2-webp")])]),t._v(" "),s("p",[t._v("For "),s("strong",[t._v("Thunar")]),t._v(" thumbnails:")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://forum.xfce.org/viewtopic.php?pid=52057#p52057",target:"_blank",rel:"noopener noreferrer"}},[t._v("XFCE Forum Post"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("the list is far from complete (just some notable options).")]),t._v(" "),s("h2",{attrs:{id:"conclusion"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#conclusion"}},[t._v("#")]),t._v(" Conclusion")]),t._v(" "),s("p",[t._v("We should look at webp as an new, exotic image format. For me it will be my new best friend for web assets, sprites etc.")]),t._v(" "),s("p",[t._v("I am very surprised with the file-size optimization, using cwebp and the neglectable quality loss of the converted images.\nNo matter png or jpg images, with the right settings, one can achieve x2 - x4 size optimization and images still be usable for\nweb. 90% of the browsers currently support it and there are lots of options for desktop applications.")]),t._v(" "),s("p",[t._v("I am planning to use webp not only for web, but also to optimize (compress) all my family photos and keep them as .webp, while use less disk space.")]),t._v(" "),s("p",[t._v("Not to mention its animation capabilities, which were not discussed in this post.")]),t._v(" "),s("p",[t._v('With this post i only "scratch the surface" re: webp and did not had the intention to describe all capabilities and options of it.\nFor sure, there is much more to be said (pros and cons) and much more tests and comparisons to be made. Laybe another time.')])])}),[],!1,null,null,null);a.default=r.exports}}]);